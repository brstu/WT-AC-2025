# Лабораторная работа 03. Асинхронность и HTTP‑кэш — Методические материалы

Постановка задания, цели, артефакты и критерии — в README этой лабораторной работы. Ниже — только практические указания и нейтральные примеры.

## Установка необходимых инструментов
- Node.js LTS, npm.
- VS Code + любой Git‑клиент (GitKraken по желанию).

Быстрый старт mock‑API (один из вариантов):
```powershell
npm i -D json-server; npx json-server --watch db.json --port 5174
```

## Рекомендуемые плагины VS Code
- REST Client или Thunder Client — для проверки API.
- ESLint/Prettier — стиль и базовые ошибки.
- Error Lens — подсветка ошибок прямо в коде.

## Примеры (общие, не раскрывают решение)
1) `fetchWithRetry` с таймаутом и эксп. бэкоффом (фрагмент):
```js
export async function fetchWithRetry(url, {retries=2, backoffMs=500, timeoutMs=5000} = {}) {
	let attempt = 0;
	while (true) {
		const controller = new AbortController();
		const timer = setTimeout(() => controller.abort(), timeoutMs);
		try {
			const res = await fetch(url, { signal: controller.signal });
			clearTimeout(timer);
			if (!res.ok) throw new Error(`HTTP ${res.status}`);
			return await res.json();
		} catch (err) {
			clearTimeout(timer);
			if (attempt++ >= retries) throw err;
			await new Promise(r => setTimeout(r, backoffMs * Math.pow(2, attempt-1)));
		}
	}
}
```

2) Дебаунс ввода:
```js
export const debounce = (fn, ms = 300) => {
	let t;
	return (...args) => { clearTimeout(t); t = setTimeout(() => fn(...args), ms); };
};
```

3) Отмена устаревшего запроса при новом поиске:
```js
let lastController;
async function search(q) {
	if (lastController) lastController.abort();
	lastController = new AbortController();
	const res = await fetch(`/api/items?q=${encodeURIComponent(q)}`, { signal: lastController.signal });
	return res.json();
}
```
