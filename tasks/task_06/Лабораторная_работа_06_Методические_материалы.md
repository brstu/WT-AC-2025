# Лабораторная работа 06. Базы данных и авторизация — Методические материалы

Полная постановка задачи — в README. Здесь только практические указания и примеры.

## Установка необходимых инструментов
- Node.js LTS, npm.
- Выбранная СУБД (SQLite/PostgreSQL) и клиент.
- VS Code.

## Рекомендуемые плагины VS Code
- Prisma/SQL Tools (при выборе Prisma/SQL‑плагинов).
- REST Client/Thunder Client — проверка API.
- ESLint/Prettier — стиль кода.

## Примеры (общие)
1) Prisma схема (фрагмент):
```prisma
model User {
	id           Int     @id @default(autoincrement())
	email        String  @unique
	passwordHash String
	role         String  @default("user")
	tasks        Task[]
}
model Task {
	id      Int    @id @default(autoincrement())
	title   String
	done    Boolean @default(false)
	owner   User   @relation(fields: [ownerId], references: [id])
	ownerId Int
}
```

2) Middleware защиты маршрутов (фрагмент):
```js
import jwt from 'jsonwebtoken';
export function auth(req, res, next) {
	const h = req.headers.authorization || '';
	const token = h.startsWith('Bearer ') ? h.slice(7) : null;
	if (!token) return res.status(401).json({ message: 'No token' });
	try {
		req.user = jwt.verify(token, process.env.JWT_SECRET);
		next();
	} catch (e) {
		return res.status(401).json({ message: 'Invalid token' });
	}
}
```
