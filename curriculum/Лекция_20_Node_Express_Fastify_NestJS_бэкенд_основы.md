# –õ–µ–∫—Ü–∏—è 20. –ë—ç–∫–µ–Ω–¥ –Ω–∞ Node.js: Express, Fastify, NestJS

**–¶–µ–ª—å –ª–µ–∫—Ü–∏–∏:** –ò–∑—É—á–∏—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ —Å–æ–∑–¥–∞–Ω–∏—é —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ Node.js, –æ—Å–≤–æ–∏—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ (Express, Fastify, NestJS) –∏ –Ω–∞—É—á–∏—Ç—å—Å—è —Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–µ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–µ REST API.

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. **–ü–æ—á–µ–º—É Node.js –¥–ª—è –±—ç–∫–µ–Ω–¥–∞:** Event Loop, –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π I/O, —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ npm.
2. **Express:** –ú–∏–Ω–∏–º–∞–ª–∏–∑–º, middleware-–∫–æ–Ω–≤–µ–π–µ—Ä, —Ä–æ—É—Ç–∏–Ω–≥, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫.
3. **Fastify:** –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Å—Ö–µ–º—ã JSON Schema, –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è, –ø–ª–∞–≥–∏–Ω—ã.
4. **NestJS:** –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, Dependency Injection, –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã, TypeScript-first –ø–æ–¥—Ö–æ–¥.
5. **Best Practices:** –í–∞–ª–∏–¥–∞—Ü–∏—è (Zod/Joi/class-validator), –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (Pino/Winston), –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env), —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞.
6. **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ CRUD API —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π, –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∏ —Ç–µ—Å—Ç–∞–º–∏.

## –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è —á—Ç–µ–Ω–∏—è

- [Express.js Documentation](https://expressjs.com/ru/) ‚Äî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [Fastify Documentation](https://fastify.dev/) ‚Äî –±—ã—Å—Ç—Ä—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- [NestJS Documentation](https://docs.nestjs.com/) ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- [Node.js Best Practices](https://github.com/goldbergyoni/nodebestpractices) ‚Äî –∫–æ–ª–ª–µ–∫—Ü–∏—è –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫
- [MDN: HTTP](https://developer.mozilla.org/ru/docs/Web/HTTP) ‚Äî –æ—Å–Ω–æ–≤—ã HTTP-–ø—Ä–æ—Ç–æ–∫–æ–ª–∞

---

## 1) –ü–æ—á–µ–º—É Node.js –¥–ª—è –±—ç–∫–µ–Ω–¥–∞

Node.js ‚Äî —ç—Ç–æ JavaScript-–¥–≤–∏–∂–æ–∫ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞. –û–Ω –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –¥–≤–∏–∂–∫–µ V8 –æ—Ç Google Chrome –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å JavaScript –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

### Event Loop ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ (PHP, Java —Å –ø–æ—Ç–æ–∫–∞–º–∏ –Ω–∞ –∫–∞–∂–¥–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ), Node.js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã–π Event Loop** —Å –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–º I/O.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

```javascript
// –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –±–ª–æ–∫–∏—Ä—É—é—â–∏–π –ø–æ–¥—Ö–æ–¥ (–ø—Å–µ–≤–¥–æ–∫–æ–¥)
const data1 = readFileSync('file1.txt');  // –∂–¥—ë–º 100–º—Å
const data2 = readFileSync('file2.txt');  // –∂–¥—ë–º 100–º—Å
console.log('–û–±—â–µ–µ –≤—Ä–µ–º—è: 200–º—Å');

// Node.js –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π –ø–æ–¥—Ö–æ–¥
readFile('file1.txt', (err, data1) => {
  console.log('–§–∞–π–ª 1 –ø—Ä–æ—á–∏—Ç–∞–Ω');
});
readFile('file2.txt', (err, data2) => {
  console.log('–§–∞–π–ª 2 –ø—Ä–æ—á–∏—Ç–∞–Ω');
});
console.log('–û–±—â–µ–µ –≤—Ä–µ–º—è: ~100–º—Å (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)');
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Event Loop:**

- **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è I/O-–æ–ø–µ—Ä–∞—Ü–∏–π:** –û–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å Node.js –º–æ–∂–µ—Ç –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å —Ç—ã—Å—è—á–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.
- **–ù–µ—Ç overhead –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤:** –í —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö –∫–∞–∂–¥–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ = –Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫ (–¥–æ—Ä–æ–≥–æ –ø–æ –ø–∞–º—è—Ç–∏).
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞:** –û–¥–∏–Ω –ø–æ—Ç–æ–∫ ‚Üí –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π, –≥–æ–Ω–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**

- **CPU-–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏:** –ï—Å–ª–∏ –∫–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç—è–∂—ë–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ), –æ–Ω –±–ª–æ–∫–∏—Ä—É–µ—Ç Event Loop, –∏ —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –¥—Ä—É–≥–∏–µ –∑–∞–ø—Ä–æ—Å—ã.
- **–†–µ—à–µ–Ω–∏–µ:** –í—ã–Ω–æ—Å–∏—Ç—å —Ç—è–∂—ë–ª—ã–µ –∑–∞–¥–∞—á–∏ –≤ Worker Threads –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã.

### –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ npm ‚Äî –º–∏–ª–ª–∏–æ–Ω—ã –ø–∞–∫–µ—Ç–æ–≤

npm (Node Package Manager) ‚Äî –∫—Ä—É–ø–Ω–µ–π—à–∏–π —Ä–µ–µ—Å—Ç—Ä –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –ü–û –≤ –º–∏—Ä–µ (–±–æ–ª–µ–µ 2 –º–∏–ª–ª–∏–æ–Ω–æ–≤ –ø–∞–∫–µ—Ç–æ–≤).

**–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –¥–ª—è –±—ç–∫–µ–Ω–¥–∞:**

- **Express, Fastify, Koa** ‚Äî –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏.
- **Prisma, TypeORM, Sequelize** ‚Äî ORM –¥–ª—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö.
- **Passport, jsonwebtoken** ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è.
- **Joi, Zod** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö.
- **Winston, Pino** ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

### –ì–¥–µ Node.js –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

- **REST API –∏ GraphQL —Å–µ—Ä–≤–µ—Ä—ã:** –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –¥–ª—è JSON-–¥–∞–Ω–Ω—ã—Ö.
- **Real-time –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** WebSockets (—á–∞—Ç—ã, –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∫–æ–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã).
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã:** –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç, –º–∞–ª—ã–π footprint.
- **SSR (Server-Side Rendering):** Next.js, Nuxt.js –¥–ª—è React/Vue.

**–ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Node.js:**

- CPU-–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ (–º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ, –≤–∏–¥–µ–æ-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ) ‚Äî –ª—É—á—à–µ Python/Go/Rust.
- –õ–µ–≥–∞—Å–∏-—Å–∏—Å—Ç–µ–º—ã —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ–º Java/C#.

---

## 2) Express ‚Äî –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫

Express ‚Äî —Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Node.js. –ï–≥–æ —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è: "–ù–∏—á–µ–≥–æ –ª–∏—à–Ω–µ–≥–æ, –º–∞–∫—Å–∏–º—É–º –≥–∏–±–∫–æ—Å—Ç–∏".

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä

```javascript
// server.js
import express from 'express';

const app = express();

// Middleware –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON –∏–∑ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
app.use(express.json());

// –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –º–∞—Ä—à—Ä—É—Ç
app.get('/', (req, res) => {
  res.json({ message: 'Hello, Express!' });
});

// –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
app.listen(3000, () => {
  console.log('‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω: http://localhost:3000');
});
```

**–ó–∞–ø—É—Å–∫:**

```powershell
npm init -y
npm install express
node server.js
```

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: `http://localhost:3000` ‚Üí —É–≤–∏–¥–∏—Ç–µ `{"message":"Hello, Express!"}`.

### Middleware ‚Äî –∫–æ–Ω–≤–µ–π–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

Middleware ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.

```javascript
// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
app.use((req, res, next) => {
  console.log(`${req.method} ${req.url} - ${new Date().toISOString()}`);
  next();  // –ø–µ—Ä–µ–¥–∞—ë–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–º—É middleware
});

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
app.use((req, res, next) => {
  const token = req.headers.authorization;
  if (!token) {
    return res.status(401).json({ error: 'Unauthorized' });
  }
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞...
  next();
});

// –ú–∞—Ä—à—Ä—É—Ç (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—Å–µ—Ö middleware)
app.get('/protected', (req, res) => {
  res.json({ data: '–°–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ' });
});
```

**–ü–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω:** Middleware –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è. –ï—Å–ª–∏ –∑–∞–±—ã—Ç—å –≤—ã–∑–≤–∞—Ç—å `next()`, –∑–∞–ø—Ä–æ—Å "–∑–∞–≤–∏—Å–Ω–µ—Ç".

### –†–æ—É—Ç–∏–Ω–≥ ‚Äî –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤

```javascript
// GET /users ‚Äî –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
app.get('/users', (req, res) => {
  res.json([{ id: 1, name: 'Alice' }, { id: 2, name: 'Bob' }]);
});

// GET /users/:id ‚Äî –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
app.get('/users/:id', (req, res) => {
  const userId = req.params.id;
  res.json({ id: userId, name: 'Alice' });
});

// POST /users ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
app.post('/users', (req, res) => {
  const newUser = req.body;  // { name: 'Charlie' }
  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î...
  res.status(201).json({ id: 3, ...newUser });
});

// PUT /users/:id ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
app.put('/users/:id', (req, res) => {
  const userId = req.params.id;
  const updates = req.body;
  res.json({ id: userId, ...updates });
});

// DELETE /users/:id ‚Äî —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
app.delete('/users/:id', (req, res) => {
  const userId = req.params.id;
  res.status(204).send();  // 204 No Content
});
```

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ —á–µ—Ä–µ–∑ Router

–î–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã —Å –º–∞—Ä—à—Ä—É—Ç–∞–º–∏.

**routes/users.js:**

```javascript
import express from 'express';

const router = express.Router();

router.get('/', (req, res) => {
  res.json([{ id: 1, name: 'Alice' }]);
});

router.post('/', (req, res) => {
  res.status(201).json({ id: 2, name: req.body.name });
});

export default router;
```

**server.js:**

```javascript
import express from 'express';
import usersRouter from './routes/users.js';

const app = express();
app.use(express.json());

// –ü–æ–¥–∫–ª—é—á–∞–µ–º —Ä–æ—É—Ç–µ—Ä —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º /users
app.use('/users', usersRouter);

app.listen(3000);
```

–¢–µ–ø–µ—Ä—å `GET /users` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Ä–æ—É—Ç–µ—Ä–æ–º –∏–∑ `routes/users.js`.

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

Express –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π middleware –¥–ª—è –æ—à–∏–±–æ–∫ (4 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –≤–º–µ—Å—Ç–æ 3).

```javascript
// –û–±—ã—á–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç
app.get('/error', (req, res) => {
  throw new Error('–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫!');
});

// Middleware –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ü–û–°–õ–ï–î–ù–ò–ú)
app.use((err, req, res, next) => {
  console.error(err.stack);
  res.status(500).json({
    error: 'Internal Server Error',
    message: err.message
  });
});
```

**Best Practice:** –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å `AppError` –¥–ª—è —Å–≤–æ–∏—Ö –æ—à–∏–±–æ–∫:

```javascript
class AppError extends Error {
  constructor(message, statusCode) {
    super(message);
    this.statusCode = statusCode;
  }
}

// –í –º–∞—Ä—à—Ä—É—Ç–µ
app.get('/user/:id', (req, res, next) => {
  const user = findUserById(req.params.id);
  if (!user) {
    return next(new AppError('User not found', 404));
  }
  res.json(user);
});

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
app.use((err, req, res, next) => {
  const statusCode = err.statusCode || 500;
  res.status(statusCode).json({
    error: err.message,
    ...(process.env.NODE_ENV === 'development' && { stack: err.stack })
  });
});
```

### –ü—Ä–∏–º–µ—Ä CRUD API –¥–ª—è –∑–∞–¥–∞—á

```javascript
import express from 'express';

const app = express();
app.use(express.json());

let tasks = [
  { id: 1, title: '–ò–∑—É—á–∏—Ç—å Express', completed: false },
  { id: 2, title: '–°–æ–∑–¥–∞—Ç—å API', completed: false }
];

// GET /tasks ‚Äî –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏
app.get('/tasks', (req, res) => {
  res.json(tasks);
});

// GET /tasks/:id ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á—É –ø–æ ID
app.get('/tasks/:id', (req, res) => {
  const task = tasks.find(t => t.id === parseInt(req.params.id));
  if (!task) return res.status(404).json({ error: 'Task not found' });
  res.json(task);
});

// POST /tasks ‚Äî —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
app.post('/tasks', (req, res) => {
  const newTask = {
    id: tasks.length + 1,
    title: req.body.title,
    completed: false
  };
  tasks.push(newTask);
  res.status(201).json(newTask);
});

// PUT /tasks/:id ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É
app.put('/tasks/:id', (req, res) => {
  const task = tasks.find(t => t.id === parseInt(req.params.id));
  if (!task) return res.status(404).json({ error: 'Task not found' });
  
  task.title = req.body.title ?? task.title;
  task.completed = req.body.completed ?? task.completed;
  res.json(task);
});

// DELETE /tasks/:id ‚Äî —É–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É
app.delete('/tasks/:id', (req, res) => {
  const index = tasks.findIndex(t => t.id === parseInt(req.params.id));
  if (index === -1) return res.status(404).json({ error: 'Task not found' });
  
  tasks.splice(index, 1);
  res.status(204).send();
});

app.listen(3000, () => console.log('‚úÖ http://localhost:3000'));
```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ curl:**

```powershell
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏
curl http://localhost:3000/tasks

# –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
curl -X POST http://localhost:3000/tasks -H "Content-Type: application/json" -d '{"title":"–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞"}'

# –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É
curl -X PUT http://localhost:3000/tasks/1 -H "Content-Type: application/json" -d '{"completed":true}'

# –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É
curl -X DELETE http://localhost:3000/tasks/2
```

---

## 3) Fastify ‚Äî –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫

Fastify ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Express —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ **–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** (–≤ 2-3 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ Express) –∏ **developer experience**.

### –ü–æ—á–µ–º—É Fastify

- **–°–∫–æ—Ä–æ—Å—Ç—å:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±—ã—Å—Ç—Ä—É—é –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é (`find-my-way`).
- **JSON Schema –≤–∞–ª–∏–¥–∞—Ü–∏—è:** –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ JSON Schema (–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ –±—ã—Å—Ç—Ä—ã–π –∫–æ–¥).
- **TypeScript-friendly:** –û—Ç–ª–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–æ–≤ –∏–∑ –∫–æ—Ä–æ–±–∫–∏.
- **–ü–ª–∞–≥–∏–Ω—ã:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–ª–∞–≥–∏–Ω–æ–≤ –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –∫–æ–¥–∞.

### –ë–∞–∑–æ–≤—ã–π Fastify —Å–µ—Ä–≤–µ—Ä

```javascript
// server.js
import Fastify from 'fastify';

const fastify = Fastify({
  logger: true  // –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
});

fastify.get('/', async (request, reply) => {
  return { message: 'Hello, Fastify!' };
});

// –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
try {
  await fastify.listen({ port: 3000 });
  console.log('‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω: http://localhost:3000');
} catch (err) {
  fastify.log.error(err);
  process.exit(1);
}
```

**–ó–∞–ø—É—Å–∫:**

```powershell
npm install fastify
node server.js
```

### JSON Schema –≤–∞–ª–∏–¥–∞—Ü–∏—è

Fastify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.

```javascript
fastify.post('/users', {
  schema: {
    body: {
      type: 'object',
      required: ['name', 'email'],
      properties: {
        name: { type: 'string', minLength: 3 },
        email: { type: 'string', format: 'email' },
        age: { type: 'integer', minimum: 18 }
      }
    },
    response: {
      201: {
        type: 'object',
        properties: {
          id: { type: 'integer' },
          name: { type: 'string' },
          email: { type: 'string' }
        }
      }
    }
  }
}, async (request, reply) => {
  const newUser = {
    id: Date.now(),
    ...request.body
  };
  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î...
  reply.code(201).send(newUser);
});
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

1. Fastify –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç `request.body` –ø–æ —Å—Ö–µ–º–µ `body`.
2. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `name` –∫–æ—Ä–æ—á–µ 3 —Å–∏–º–≤–æ–ª–æ–≤), –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `400 Bad Request` —Å –¥–µ—Ç–∞–ª—è–º–∏ –æ—à–∏–±–∫–∏.
3. –°—Ö–µ–º–∞ `response` –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è OpenAPI).

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

```powershell
# –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å (name —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π)
curl -X POST http://localhost:3000/users -H "Content-Type: application/json" -d '{"name":"AB","email":"test@example.com"}'
# –û—Ç–≤–µ—Ç: {"statusCode":400,"error":"Bad Request","message":"body/name must NOT have fewer than 3 characters"}

# –í–∞–ª–∏–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å
curl -X POST http://localhost:3000/users -H "Content-Type: application/json" -d '{"name":"Alice","email":"alice@example.com","age":25}'
# –û—Ç–≤–µ—Ç: {"id":1699999999999,"name":"Alice","email":"alice@example.com"}
```

### –ü—Ä–∏–º–µ—Ä CRUD API –Ω–∞ Fastify

```javascript
import Fastify from 'fastify';

const fastify = Fastify({ logger: true });

let tasks = [
  { id: 1, title: '–ò–∑—É—á–∏—Ç—å Fastify', completed: false },
  { id: 2, title: '–°–æ–∑–¥–∞—Ç—å API', completed: false }
];

// GET /tasks ‚Äî –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏
fastify.get('/tasks', async (request, reply) => {
  return tasks;
});

// GET /tasks/:id ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á—É –ø–æ ID
fastify.get('/tasks/:id', {
  schema: {
    params: {
      type: 'object',
      properties: {
        id: { type: 'integer' }
      }
    }
  }
}, async (request, reply) => {
  const task = tasks.find(t => t.id === parseInt(request.params.id));
  if (!task) {
    return reply.code(404).send({ error: 'Task not found' });
  }
  return task;
});

// POST /tasks ‚Äî —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
fastify.post('/tasks', {
  schema: {
    body: {
      type: 'object',
      required: ['title'],
      properties: {
        title: { type: 'string', minLength: 1 }
      }
    }
  }
}, async (request, reply) => {
  const newTask = {
    id: tasks.length + 1,
    title: request.body.title,
    completed: false
  };
  tasks.push(newTask);
  return reply.code(201).send(newTask);
});

// PUT /tasks/:id ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É
fastify.put('/tasks/:id', {
  schema: {
    params: {
      type: 'object',
      properties: { id: { type: 'integer' } }
    },
    body: {
      type: 'object',
      properties: {
        title: { type: 'string' },
        completed: { type: 'boolean' }
      }
    }
  }
}, async (request, reply) => {
  const task = tasks.find(t => t.id === parseInt(request.params.id));
  if (!task) {
    return reply.code(404).send({ error: 'Task not found' });
  }

  if (request.body.title !== undefined) task.title = request.body.title;
  if (request.body.completed !== undefined) task.completed = request.body.completed;

  return task;
});

// DELETE /tasks/:id ‚Äî —É–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É
fastify.delete('/tasks/:id', async (request, reply) => {
  const index = tasks.findIndex(t => t.id === parseInt(request.params.id));
  if (index === -1) {
    return reply.code(404).send({ error: 'Task not found' });
  }

  tasks.splice(index, 1);
  return reply.code(204).send();
});

// –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
await fastify.listen({ port: 3000 });
```

### –ü–ª–∞–≥–∏–Ω—ã ‚Äî –º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

Fastify –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–ª–∞–≥–∏–Ω—ã –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

```javascript
// plugins/database.js
import fp from 'fastify-plugin';

async function databasePlugin(fastify, options) {
  // –ò–º–∏—Ç–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
  const db = {
    users: [{ id: 1, name: 'Alice' }]
  };

  // –î–µ–∫–æ—Ä–∏—Ä—É–µ–º –∏–Ω—Å—Ç–∞–Ω—Å Fastify
  fastify.decorate('db', db);
}

export default fp(databasePlugin);
```

**server.js:**

```javascript
import Fastify from 'fastify';
import databasePlugin from './plugins/database.js';

const fastify = Fastify();

// –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø–ª–∞–≥–∏–Ω
await fastify.register(databasePlugin);

// –¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–µ–Ω fastify.db
fastify.get('/users', async (request, reply) => {
  return fastify.db.users;
});

await fastify.listen({ port: 3000 });
```

### Hooks ‚Äî –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞–ø—Ä–æ—Å–∞

Fastify –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ö—É–∫–∏ –¥–ª—è –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —ç—Ç–∞–ø–∞—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞.

```javascript
// onRequest ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
fastify.addHook('onRequest', async (request, reply) => {
  console.log(`‚û°Ô∏è –í—Ö–æ–¥—è—â–∏–π –∑–∞–ø—Ä–æ—Å: ${request.method} ${request.url}`);
});

// preHandler ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞, –¥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞
fastify.addHook('preHandler', async (request, reply) => {
  const token = request.headers.authorization;
  if (!token) {
    reply.code(401).send({ error: 'Unauthorized' });
  }
});

// onResponse ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞
fastify.addHook('onResponse', async (request, reply) => {
  console.log(`‚úÖ –û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω: ${reply.statusCode}`);
});
```

---

## 4) NestJS ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

NestJS ‚Äî —ç—Ç–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ TypeScript. –í–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω Angular, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã, Dependency Injection –∏ –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.

### –ü–æ—á–µ–º—É NestJS

- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–∑ –∫–æ—Ä–æ–±–∫–∏:** –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –º–æ–¥—É–ª–∏, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, —Å–µ—Ä–≤–∏—Å—ã, –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã.
- **Dependency Injection:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ (–∫–∞–∫ –≤ Spring/Angular).
- **TypeScript-first:** –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã.
- **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ REST, GraphQL, WebSockets, –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤.
- **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å:** –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (Jest).

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Nest CLI –≥–ª–æ–±–∞–ª—å–Ω–æ
npm install -g @nestjs/cli

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
nest new my-nest-app

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd my-nest-app

# –ó–∞–ø—É—Å—Ç–∏—Ç—å dev-—Å–µ—Ä–≤–µ—Ä
npm run start:dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000` ‚Üí —É–≤–∏–¥–∏—Ç–µ `Hello World!`.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ NestJS

```plaintext
my-nest-app/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app.module.ts       # –ö–æ—Ä–Ω–µ–≤–æ–π –º–æ–¥—É–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ app.controller.ts   # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å—ã)
‚îÇ   ‚îú‚îÄ‚îÄ app.service.ts      # –°–µ—Ä–≤–∏—Å (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
‚îÇ   ‚îî‚îÄ‚îÄ main.ts             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ test/                   # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ nest-cli.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îî‚îÄ‚îÄ package.json
```

### –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤—Ö–æ–¥—è—â–∏—Ö HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤.

```typescript
// tasks.controller.ts
import { Controller, Get, Post, Put, Delete, Body, Param } from '@nestjs/common';

@Controller('tasks')  // –ü—Ä–µ—Ñ–∏–∫—Å –º–∞—Ä—à—Ä—É—Ç–∞ /tasks
export class TasksController {
  private tasks = [
    { id: 1, title: '–ò–∑—É—á–∏—Ç—å NestJS', completed: false },
    { id: 2, title: '–°–æ–∑–¥–∞—Ç—å API', completed: false }
  ];

  // GET /tasks
  @Get()
  findAll() {
    return this.tasks;
  }

  // GET /tasks/:id
  @Get(':id')
  findOne(@Param('id') id: string) {
    const task = this.tasks.find(t => t.id === parseInt(id));
    if (!task) {
      throw new NotFoundException('Task not found');
    }
    return task;
  }

  // POST /tasks
  @Post()
  create(@Body() createTaskDto: any) {
    const newTask = {
      id: this.tasks.length + 1,
      title: createTaskDto.title,
      completed: false
    };
    this.tasks.push(newTask);
    return newTask;
  }

  // PUT /tasks/:id
  @Put(':id')
  update(@Param('id') id: string, @Body() updateTaskDto: any) {
    const task = this.tasks.find(t => t.id === parseInt(id));
    if (!task) {
      throw new NotFoundException('Task not found');
    }
    Object.assign(task, updateTaskDto);
    return task;
  }

  // DELETE /tasks/:id
  @Delete(':id')
  remove(@Param('id') id: string) {
    const index = this.tasks.findIndex(t => t.id === parseInt(id));
    if (index === -1) {
      throw new NotFoundException('Task not found');
    }
    this.tasks.splice(index, 1);
    return { message: 'Task deleted' };
  }
}
```

### –°–µ—Ä–≤–∏—Å—ã ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

–°–µ—Ä–≤–∏—Å—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏ –º–æ–≥—É—Ç –≤–Ω–µ–¥—Ä—è—Ç—å—Å—è –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —á–µ—Ä–µ–∑ Dependency Injection.

```typescript
// tasks.service.ts
import { Injectable, NotFoundException } from '@nestjs/common';

@Injectable()  // –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä –¥–ª—è DI
export class TasksService {
  private tasks = [
    { id: 1, title: '–ò–∑—É—á–∏—Ç—å NestJS', completed: false },
    { id: 2, title: '–°–æ–∑–¥–∞—Ç—å API', completed: false }
  ];

  findAll() {
    return this.tasks;
  }

  findOne(id: number) {
    const task = this.tasks.find(t => t.id === id);
    if (!task) {
      throw new NotFoundException(`Task with ID ${id} not found`);
    }
    return task;
  }

  create(title: string) {
    const newTask = {
      id: this.tasks.length + 1,
      title,
      completed: false
    };
    this.tasks.push(newTask);
    return newTask;
  }

  update(id: number, updates: Partial<{ title: string; completed: boolean }>) {
    const task = this.findOne(id);
    Object.assign(task, updates);
    return task;
  }

  remove(id: number) {
    const index = this.tasks.findIndex(t => t.id === id);
    if (index === -1) {
      throw new NotFoundException(`Task with ID ${id} not found`);
    }
    this.tasks.splice(index, 1);
  }
}
```

**–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ–º —Å–µ—Ä–≤–∏—Å–∞:**

```typescript
// tasks.controller.ts
import { Controller, Get, Post, Put, Delete, Body, Param } from '@nestjs/common';
import { TasksService } from './tasks.service';

@Controller('tasks')
export class TasksController {
  // Dependency Injection: NestJS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –∏–Ω—Å—Ç–∞–Ω—Å TasksService
  constructor(private readonly tasksService: TasksService) {}

  @Get()
  findAll() {
    return this.tasksService.findAll();
  }

  @Get(':id')
  findOne(@Param('id') id: string) {
    return this.tasksService.findOne(parseInt(id));
  }

  @Post()
  create(@Body() createTaskDto: { title: string }) {
    return this.tasksService.create(createTaskDto.title);
  }

  @Put(':id')
  update(@Param('id') id: string, @Body() updateTaskDto: any) {
    return this.tasksService.update(parseInt(id), updateTaskDto);
  }

  @Delete(':id')
  remove(@Param('id') id: string) {
    this.tasksService.remove(parseInt(id));
    return { message: 'Task deleted' };
  }
}
```

### –ú–æ–¥—É–ª–∏ ‚Äî –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞

–ú–æ–¥—É–ª—å –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, —Å–µ—Ä–≤–∏—Å—ã).

```typescript
// tasks.module.ts
import { Module } from '@nestjs/common';
import { TasksController } from './tasks.controller';
import { TasksService } from './tasks.service';

@Module({
  controllers: [TasksController],  // –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –º–æ–¥—É–ª—è
  providers: [TasksService],       // –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã (—Å–µ—Ä–≤–∏—Å—ã) –º–æ–¥—É–ª—è
  exports: [TasksService]          // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º, –µ—Å–ª–∏ –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
})
export class TasksModule {}
```

**–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –º–æ–¥—É–ª—å –≤ –∫–æ—Ä–Ω–µ–≤–æ–º `app.module.ts`:**

```typescript
// app.module.ts
import { Module } from '@nestjs/common';
import { TasksModule } from './tasks/tasks.module';

@Module({
  imports: [TasksModule],  // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥—É–ª—å –∑–∞–¥–∞—á
})
export class AppModule {}
```

### DTO –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å class-validator

DTO (Data Transfer Object) ‚Äî –∫–ª–∞—Å—Å—ã –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π.

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**

```powershell
npm install class-validator class-transformer
```

**create-task.dto.ts:**

```typescript
import { IsString, IsNotEmpty, MinLength } from 'class-validator';

export class CreateTaskDto {
  @IsString()
  @IsNotEmpty()
  @MinLength(3, { message: 'Title must be at least 3 characters long' })
  title: string;
}
```

**–í–∫–ª—é—á–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ –≤ `main.ts`:**

```typescript
// main.ts
import { NestFactory } from '@nestjs/core';
import { ValidationPipe } from '@nestjs/common';
import { AppModule } from './app.module';

async function bootstrap() {
  const app = await NestFactory.create(AppModule);

  // –í–∫–ª—é—á–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é
  app.useGlobalPipes(new ValidationPipe({
    whitelist: true,  // –£–¥–∞–ª—è–µ—Ç –ª–∏—à–Ω–∏–µ –ø–æ–ª—è –∏–∑ DTO
    forbidNonWhitelisted: true,  // –í—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ –ª–∏—à–Ω–∏—Ö –ø–æ–ª—è—Ö
    transform: true  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Ç–∏–ø—ã
  }));

  await app.listen(3000);
}
bootstrap();
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ DTO –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ:**

```typescript
@Post()
create(@Body() createTaskDto: CreateTaskDto) {
  return this.tasksService.create(createTaskDto.title);
}
```

–¢–µ–ø–µ—Ä—å –µ—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

```powershell
curl -X POST http://localhost:3000/tasks -H "Content-Type: application/json" -d '{"title":"AB"}'
```

–û—Ç–≤–µ—Ç:

```json
{
  "statusCode": 400,
  "message": ["Title must be at least 3 characters long"],
  "error": "Bad Request"
}
```

### Guards ‚Äî –∑–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤

Guards –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞.

```typescript
// auth.guard.ts
import { Injectable, CanActivate, ExecutionContext, UnauthorizedException } from '@nestjs/common';

@Injectable()
export class AuthGuard implements CanActivate {
  canActivate(context: ExecutionContext): boolean {
    const request = context.switchToHttp().getRequest();
    const token = request.headers.authorization;

    if (!token || token !== 'Bearer secret-token') {
      throw new UnauthorizedException('Invalid token');
    }

    return true;  // –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø
  }
}
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ Guard –∫ –º–∞—Ä—à—Ä—É—Ç—É:**

```typescript
import { Controller, Get, UseGuards } from '@nestjs/common';
import { AuthGuard } from './auth.guard';

@Controller('tasks')
export class TasksController {
  @Get()
  @UseGuards(AuthGuard)  // –ó–∞—â–∏—â–∞–µ–º –º–∞—Ä—à—Ä—É—Ç
  findAll() {
    return this.tasksService.findAll();
  }
}
```

–¢–µ–ø–µ—Ä—å –∑–∞–ø—Ä–æ—Å –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ –≤–µ—Ä–Ω—ë—Ç `401 Unauthorized`.

---

## 5) Best Practices ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–í Express (—Å Zod):**

```javascript
import express from 'express';
import { z } from 'zod';

const app = express();
app.use(express.json());

// –°—Ö–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
const createTaskSchema = z.object({
  title: z.string().min(3, 'Title must be at least 3 characters'),
  completed: z.boolean().optional()
});

app.post('/tasks', (req, res, next) => {
  try {
    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    const validated = createTaskSchema.parse(req.body);
    // –û–±—Ä–∞–±–æ—Ç–∫–∞...
    res.status(201).json({ id: 1, ...validated });
  } catch (error) {
    if (error instanceof z.ZodError) {
      return res.status(400).json({ errors: error.errors });
    }
    next(error);
  }
});
```

**–í Fastify (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è JSON Schema –≤–∞–ª–∏–¥–∞—Ü–∏—è):**

```javascript
fastify.post('/tasks', {
  schema: {
    body: {
      type: 'object',
      required: ['title'],
      properties: {
        title: { type: 'string', minLength: 3 },
        completed: { type: 'boolean' }
      }
    }
  }
}, async (request, reply) => {
  // request.body —É–∂–µ –ø—Ä–æ–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω
  return { id: 1, ...request.body };
});
```

**–í NestJS (class-validator):**

```typescript
// dto/create-task.dto.ts
import { IsString, MinLength, IsBoolean, IsOptional } from 'class-validator';

export class CreateTaskDto {
  @IsString()
  @MinLength(3)
  title: string;

  @IsBoolean()
  @IsOptional()
  completed?: boolean;
}

// tasks.controller.ts
@Post()
create(@Body() createTaskDto: CreateTaskDto) {
  // createTaskDto —É–∂–µ –ø—Ä–æ–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω
  return this.tasksService.create(createTaskDto);
}
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**Express + Winston:**

```javascript
import winston from 'winston';

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.json(),
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' }),
    new winston.transports.Console({ format: winston.format.simple() })
  ]
});

// Middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
app.use((req, res, next) => {
  logger.info(`${req.method} ${req.url}`);
  next();
});

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
app.use((err, req, res, next) => {
  logger.error(err.message, { stack: err.stack });
  res.status(500).json({ error: 'Internal Server Error' });
});
```

**Fastify (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Pino):**

```javascript
const fastify = Fastify({
  logger: {
    level: 'info',
    transport: {
      target: 'pino-pretty',  // –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å
      options: { translateTime: 'HH:MM:ss', ignore: 'pid,hostname' }
    }
  }
});

fastify.get('/tasks', async (request, reply) => {
  request.log.info('Fetching tasks');
  return tasks;
});
```

**NestJS (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Logger):**

```typescript
import { Logger } from '@nestjs/common';

@Injectable()
export class TasksService {
  private readonly logger = new Logger(TasksService.name);

  findAll() {
    this.logger.log('Fetching all tasks');
    return this.tasks;
  }

  create(title: string) {
    this.logger.log(`Creating task: ${title}`);
    // ...
  }
}
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ .env

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**

```powershell
npm install dotenv
```

**.env:**

```plaintext
PORT=3000
DATABASE_URL=postgresql://user:password@localhost:5432/mydb
JWT_SECRET=super-secret-key
NODE_ENV=development
```

**Express:**

```javascript
import 'dotenv/config';

const PORT = process.env.PORT || 3000;
const DB_URL = process.env.DATABASE_URL;

app.listen(PORT, () => {
  console.log(`Server running on port ${PORT}`);
});
```

**NestJS (@nestjs/config):**

```powershell
npm install @nestjs/config
```

```typescript
// app.module.ts
import { Module } from '@nestjs/common';
import { ConfigModule } from '@nestjs/config';

@Module({
  imports: [
    ConfigModule.forRoot({
      isGlobal: true,  // –î–æ—Å—Ç—É–ø–µ–Ω –≤–æ –≤—Å–µ—Ö –º–æ–¥—É–ª—è—Ö
      envFilePath: '.env'
    }),
    TasksModule
  ],
})
export class AppModule {}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```typescript
import { ConfigService } from '@nestjs/config';

@Injectable()
export class TasksService {
  constructor(private configService: ConfigService) {}

  getDbUrl() {
    return this.configService.get<string>('DATABASE_URL');
  }
}
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

**Express (—Å–ª–æ—ë–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞):**

```plaintext
src/
‚îú‚îÄ‚îÄ controllers/       # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ tasks.controller.js
‚îú‚îÄ‚îÄ services/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ tasks.service.js
‚îú‚îÄ‚îÄ repositories/      # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ tasks.repository.js
‚îú‚îÄ‚îÄ middlewares/       # Middleware
‚îÇ   ‚îî‚îÄ‚îÄ auth.middleware.js
‚îú‚îÄ‚îÄ routes/            # –ú–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ tasks.routes.js
‚îú‚îÄ‚îÄ models/            # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ task.model.js
‚îú‚îÄ‚îÄ utils/             # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ logger.js
‚îî‚îÄ‚îÄ app.js             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

**NestJS (–º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞):**

```plaintext
src/
‚îú‚îÄ‚îÄ tasks/
‚îÇ   ‚îú‚îÄ‚îÄ dto/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create-task.dto.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ update-task.dto.ts
‚îÇ   ‚îú‚îÄ‚îÄ entities/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ task.entity.ts
‚îÇ   ‚îú‚îÄ‚îÄ tasks.controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ tasks.service.ts
‚îÇ   ‚îú‚îÄ‚îÄ tasks.module.ts
‚îÇ   ‚îî‚îÄ‚îÄ tasks.repository.ts
‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îú‚îÄ‚îÄ auth.controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts
‚îÇ   ‚îú‚îÄ‚îÄ auth.module.ts
‚îÇ   ‚îî‚îÄ‚îÄ guards/
‚îÇ       ‚îî‚îÄ‚îÄ jwt-auth.guard.ts
‚îú‚îÄ‚îÄ common/
‚îÇ   ‚îú‚îÄ‚îÄ filters/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ http-exception.filter.ts
‚îÇ   ‚îú‚îÄ‚îÄ interceptors/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logging.interceptor.ts
‚îÇ   ‚îî‚îÄ‚îÄ pipes/
‚îÇ       ‚îî‚îÄ‚îÄ validation.pipe.ts
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ database.config.ts
‚îú‚îÄ‚îÄ app.module.ts
‚îî‚îÄ‚îÄ main.ts
```

### –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**Express:**

```javascript
// utils/app-error.js
export class AppError extends Error {
  constructor(message, statusCode) {
    super(message);
    this.statusCode = statusCode;
    this.isOperational = true;
  }
}

// middlewares/error-handler.js
export function errorHandler(err, req, res, next) {
  const statusCode = err.statusCode || 500;
  const message = err.isOperational ? err.message : 'Internal Server Error';

  res.status(statusCode).json({
    status: 'error',
    statusCode,
    message,
    ...(process.env.NODE_ENV === 'development' && { stack: err.stack })
  });
}

// app.js
app.use(errorHandler);
```

**NestJS (Exception Filters):**

```typescript
// filters/http-exception.filter.ts
import { ExceptionFilter, Catch, ArgumentsHost, HttpException } from '@nestjs/common';

@Catch(HttpException)
export class HttpExceptionFilter implements ExceptionFilter {
  catch(exception: HttpException, host: ArgumentsHost) {
    const ctx = host.switchToHttp();
    const response = ctx.getResponse();
    const request = ctx.getRequest();
    const status = exception.getStatus();

    response.status(status).json({
      statusCode: status,
      timestamp: new Date().toISOString(),
      path: request.url,
      message: exception.message
    });
  }
}

// main.ts
app.useGlobalFilters(new HttpExceptionFilter());
```

---

## 6) –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ CRUD API —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π

–°–æ–∑–¥–∞–π—Ç–µ REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ —Å —Å–ª–µ–¥—É—é—â–∏–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏:

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
   - `POST /auth/register` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (email, password).
   - `POST /auth/login` ‚Äî –≤—Ö–æ–¥ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT-—Ç–æ–∫–µ–Ω).

2. **CRUD –∑–∞–¥–∞—á (–∑–∞—â–∏—â—ë–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã):**
   - `GET /tasks` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
   - `POST /tasks` ‚Äî —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É (—Ç—Ä–µ–±—É–µ—Ç—Å—è JWT).
   - `PUT /tasks/:id` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É (—Ç–æ–ª—å–∫–æ —Å–≤–æ—é).
   - `DELETE /tasks/:id` ‚Äî —É–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É (—Ç–æ–ª—å–∫–æ —Å–≤–æ—é).

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**

- Email –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º.
- –ü–∞—Ä–æ–ª—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤.
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–¥–∞—á–∏ –º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞.

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**

- `400 Bad Request` –¥–ª—è –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
- `401 Unauthorized` –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–≥–æ/–Ω–µ–≤–µ—Ä–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞.
- `404 Not Found` –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤.
- `500 Internal Server Error` –¥–ª—è –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫.

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**

- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã.
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ —Å stack trace.

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

- –ü–æ—Ä—Ç, JWT secret, DATABASE_URL —á–µ—Ä–µ–∑ `.env`.

### –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ Express

**package.json:**

```json
{
  "type": "module",
  "dependencies": {
    "express": "^4.18.2",
    "jsonwebtoken": "^9.0.2",
    "bcrypt": "^5.1.1",
    "zod": "^3.22.4",
    "dotenv": "^16.3.1",
    "winston": "^3.11.0"
  }
}
```

**.env:**

```plaintext
PORT=3000
JWT_SECRET=your-secret-key-here
```

**src/app.js (–æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª):**

```javascript
import express from 'express';
import 'dotenv/config';
import authRoutes from './routes/auth.routes.js';
import tasksRoutes from './routes/tasks.routes.js';
import { errorHandler } from './middlewares/error-handler.js';
import { logger } from './utils/logger.js';

const app = express();

app.use(express.json());

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
app.use((req, res, next) => {
  logger.info(`${req.method} ${req.url}`);
  next();
});

// –ú–∞—Ä—à—Ä—É—Ç—ã
app.use('/auth', authRoutes);
app.use('/tasks', tasksRoutes);

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
app.use(errorHandler);

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  logger.info(`‚úÖ Server running on http://localhost:${PORT}`);
});
```

**–ó–∞–ø—É—Å–∫:**

```powershell
npm install
node src/app.js
```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

```powershell
# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
curl -X POST http://localhost:3000/auth/register -H "Content-Type: application/json" -d '{"email":"test@example.com","password":"password123"}'

# –í—Ö–æ–¥
curl -X POST http://localhost:3000/auth/login -H "Content-Type: application/json" -d '{"email":"test@example.com","password":"password123"}'
# –û—Ç–≤–µ—Ç: {"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}

# –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É (—Å —Ç–æ–∫–µ–Ω–æ–º)
curl -X POST http://localhost:3000/tasks -H "Authorization: Bearer YOUR_TOKEN" -H "Content-Type: application/json" -d '{"title":"–ò–∑—É—á–∏—Ç—å Node.js"}'

# –ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á–∏
curl http://localhost:3000/tasks -H "Authorization: Bearer YOUR_TOKEN"
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏

- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (40%):** –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
- **–í–∞–ª–∏–¥–∞—Ü–∏—è (20%):** –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Zod/class-validator.
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (20%):** JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π.
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (10%):** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.
- **–ö–æ–¥ (10%):** –ß–∏—Å—Ç—ã–π –∫–æ–¥, —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ—ë–≤ (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä/—Å–µ—Ä–≤–∏—Å/—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π).

---

## –ö–∞–∫ —Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å (Windows)

**Express/Fastify:**

```powershell
# –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
npm init -y

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install express fastify dotenv winston zod

# –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª .env
echo "PORT=3000" > .env

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
node server.js
```

**NestJS:**

```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å CLI
npm install -g @nestjs/cli

# –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
nest new my-nest-app

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø—Ä–æ–µ–∫—Ç
cd my-nest-app

# –ó–∞–ø—É—Å—Ç–∏—Ç—å dev-—Å–µ—Ä–≤–µ—Ä
npm run start:dev
```

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- [Express.js Documentation](https://expressjs.com/ru/)
- [Fastify Documentation](https://fastify.dev/)
- [NestJS Documentation](https://docs.nestjs.com/)
- [Node.js Best Practices](https://github.com/goldbergyoni/nodebestpractices)
- [JWT.io](https://jwt.io/) ‚Äî –æ—Ç–ª–∞–¥–∫–∞ JWT-—Ç–æ–∫–µ–Ω–æ–≤
- [Zod Documentation](https://zod.dev/) ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ TypeScript
- [Pino Logger](https://getpino.io/) ‚Äî –±—ã—Å—Ç—Ä–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏

1. –ß—Ç–æ —Ç–∞–∫–æ–µ Event Loop –≤ Node.js –∏ –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç?
2. –ö–æ–≥–¥–∞ –≤—ã–±—Ä–∞—Ç—å Express, –∞ –∫–æ–≥–¥–∞ Fastify –∏–ª–∏ NestJS?
3. –ß—Ç–æ —Ç–∞–∫–æ–µ Middleware –∏ –∫–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∫–æ–Ω–≤–µ–π–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤?
4. –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –≤ Express, Fastify –∏ NestJS?
5. –ß—Ç–æ —Ç–∞–∫–æ–µ Dependency Injection –∏ –∫–∞–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ–Ω –¥–∞—ë—Ç –≤ NestJS?
6. –ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫?
7. –ö–∞–∫–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å –≤ production?
8. –ö–∞–∫ –∑–∞—â–∏—Ç–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–º–æ—â—å—é JWT-—Ç–æ–∫–µ–Ω–æ–≤?
9. –í —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º, —Å–µ—Ä–≤–∏—Å–æ–º –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º?
10. –ö–∞–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏?

---

**–ò—Ç–æ–≥:** –í—ã –∏–∑—É—á–∏–ª–∏ —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–∞ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –±—ç–∫–µ–Ω–¥–∞ –Ω–∞ Node.js ‚Äî –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π Express, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π Fastify –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π NestJS. –í—ã–±–∏—Ä–∞–π—Ç–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –∫–æ–º–∞–Ω–¥—ã! üöÄ
