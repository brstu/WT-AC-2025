# Лабораторная работа — Каталог тренажёрных программ (SPA на React)

## 1) Описание

В рамках лабораторной работы реализовано одностраничное приложение **«Каталог тренажёрных программ»** на **React (Vite)**.  
Приложение взаимодействует с **mock API** (json-server, `db.json`) и реализует полный CRUD-цикл (создание/чтение/обновление/удаление) с обязательными состояниями интерфейса и маршрутизацией.

Реализованы требования задания:
- страницы: **список / деталь / новая / редактирование / 404**
- маршрутизация: **React Router v6+**, вложенные маршруты, навигация
- защищённые маршруты: **создание/редактирование** доступны только после «логина»
- данные: получение списка и детали, **создание/обновление/удаление**, состояния **loading / error / empty**
- состояние: **Redux Toolkit + RTK Query** (кэширование, инвалидация, optimistic update на удаление)
- формы: собственная валидация на клиенте (обязательные поля + числовые диапазоны)
- уведомления: простые **toast-уведомления** (success/error/info)
- тех. требования: **.env** с API URL, структура по фичам/модулям, переиспользуемые компоненты

## 2) Метаданные

- ФИО: Будник Анна
- Группа: АС-64
- StudentID: 220033
- GitHub: annettebb
- Вариант: **Каталог тренажёрных программ**
- Дата: 22.12.2025

## 3) Параметры варианта

- Тема: **Каталог тренажёрных программ**
- Источник данных: **локальный mock API** на `json-server`
- Файл данных: `db.json` (ресурс: `/programs`)
- Количество элементов: **10–20+** (реализовано: **12+**, можно расширять)
- Сущность **Program** (карточка программы) содержит поля:
  - `id` (number)
  - `title` (название)
  - `level` (Beginner / Intermediate / Advanced)
  - `goal` (Strength / Hypertrophy / Fat loss / Endurance / Mobility)
  - `durationWeeks` (1–52)
  - `sessionsPerWeek` (1–14)
  - `equipment` (строка)
  - `description` (строка)
  - `createdAt`, `updatedAt` (дата/время)

Поиск/фильтрация:
- Поиск: **client-side**, по `title / goal / description` (case-insensitive)
- Фильтр: `level` (All/Beginner/Intermediate/Advanced)
- Сортировка: по `updatedAt` (последние изменения выше)

API и окружение:
- API URL: берётся из `.env`
  - `VITE_API_URL=http://localhost:3001`

## 4) Маршрутизация (React Router v6)

Используются вложенные маршруты и отдельные страницы:
- `/programs` — список программ
- `/programs/:id` — детальная страница программы
- `/programs/new` — создание (protected)
- `/programs/:id/edit` — редактирование (protected)
- `/login` — вход (учебный)
- `*` — 404

Защищённые маршруты реализованы через компонент **RequireAuth**:
- если пользователь не авторизован → редирект на `/login`
- после входа выполняется возврат на исходный путь

## 5) Работа с данными (Redux Toolkit + RTK Query)

Для общения с API используется **RTK Query**:
- `getPrograms` — `GET /programs` (список)
- `getProgramById` — `GET /programs/:id` (деталь)
- `createProgram` — `POST /programs` (создание)
- `updateProgram` — `PUT /programs/:id` (обновление)
- `deleteProgram` — `DELETE /programs/:id` (удаление)

Кэширование и актуализация:
- применены `tagTypes` и `providesTags/invalidatesTags` для списка и деталей
- после create/update/delete выполняется **инвалидация** списка и/или конкретной сущности

Optimistic update:
- для `deleteProgram` реализован **optimistic update**: элемент скрывается из списка сразу
- при ошибке удаления выполняется откат (`patch.undo()`)

## 6) UI-состояния (loading / error / empty)

На страницах реализованы обязательные состояния:
- **Loading**: отображается спиннер при загрузке списка/детали
- **Error**: отображается сообщение об ошибке + кнопка “Повторить” (refetch)
- **Empty**: при отсутствии результатов (после фильтра/поиска) показывается пустое состояние + действия “Сбросить/Обновить”

## 7) Формы и валидация

Форма используется для **создания** и **редактирования** программы:
- обязательные поля: `title`, `goal`
- числовые ограничения:
  - `durationWeeks`: **1–52**
  - `sessionsPerWeek`: **1–14**
- ошибки показываются после `blur` и при попытке submit
- при успешном сохранении показывается toast и выполняется навигация:
  - create → `/programs`
  - edit → `/programs/:id`

## 8) Уведомления (Toast)

Реализованы toast-уведомления без внешних библиотек:
- `success` — создание/обновление/удаление успешно
- `error` — ошибка сохранения/удаления/валидации
- `info` — служебные сообщения (при необходимости)

## 9) Структура проекта

Проект разделён по модулям/фичам:
- `src/app/` — store, RTK Query API, auth, toast
- `src/pages/` — страницы (Programs, Login, NotFound)
- `src/components/` — переиспользу
