# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ5: Events API (–ê—Ñ–∏—à–∞ + —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)

**–°—Ç—É–¥–µ–Ω—Ç:** –ö–æ–ª–æ–¥–∏—á –ú–∞–∫—Å–∏–º
**–í–∞—Ä–∏–∞–Ω—Ç:** 9

## üåê –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è–º–∏ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è–º–∏: –ø–æ–∏—Å–∫, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ Zod, —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–æ—Å–Ω–æ–≤–Ω–æ–µ)

```
task_05/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.js                # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, Swagger, –º–∏–¥–ª–≤–∞—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ storage.js         # –•—Ä–∞–Ω–∏–ª–∏—â–µ –≤ –ø–∞–º—è—Ç–∏ + CRUD-—Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ route/                 # –ú–∞—Ä—à—Ä—É—Ç—ã (events, registrations)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ events.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ registrations.js
‚îÇ   ‚îú‚îÄ‚îÄ schemas/               # Zod —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ eventSchemas.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ registrationSchemas.js
‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validate.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ errorHandler.js
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ errors.js          # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–ª–∞—Å—Å—ã –æ—à–∏–±–æ–∫
‚îú‚îÄ‚îÄ package.json               # –°–∫—Ä–∏–ø—Ç—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ doc/
    ‚îî‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
```

---

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Node.js + Express
- Zod ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- Swagger (swagger-jsdoc + swagger-ui-express) ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- CORS, Morgan, dotenv

---

## üö¶ –ú–∞—Ä—à—Ä—É—Ç—ã –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

–í—Å–µ endpoints –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –≤ `index.js` –ø–æ–¥ –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `/api/v1` –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ JSDoc/Swagger.

### Events

- GET /api/v1/events
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `q` (–ø–æ–∏—Å–∫ –ø–æ title/description), `limit`, `offset`
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: { data: [...], meta: { total, limit, offset, hasMore } }
  - –ü—Ä–∏–º–µ—Ä: `GET /api/v1/events?q=meetup&limit=5&offset=0`

- GET /api/v1/events/:id
  - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –ø–æ id, 404 –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω

- POST /api/v1/events
  - –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
  - –í–∞–ª–∏–¥–∞—Ü–∏—è: `title` (string, min 1, max 100), `date` (ISO datetime), `location` (min 1)
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç (201)

- PATCH /api/v1/events/:id
  - –ß–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ–π)

- DELETE /api/v1/events/:id
  - –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è (204 –µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ)

### Registrations

- GET /api/v1/events/:eventId/registrations
  - –°–ø–∏—Å–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π –¥–ª—è —Å–æ–±—ã—Ç–∏—è

- POST /api/v1/events/:eventId/registrations
  - –°–æ–∑–¥–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –¥–ª—è —Å–æ–±—ã—Ç–∏—è
  - –í–∞–ª–∏–¥–∞—Ü–∏—è: `name` (1-100), `email` (email), `phone` (optional)
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é (201)

- GET /api/v1/registrations/:id
  - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ ID

- PATCH /api/v1/registrations/:id
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (—á–∞—Å—Ç–∏—á–Ω–æ–µ)

- DELETE /api/v1/registrations/:id
  - –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (204)

---

## ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è & –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- `src/schemas/eventSchemas.js` ‚Äî `eventCreateSchema`, `eventUpdateSchema` (Zod)
- `src/schemas/registrationSchemas.js` ‚Äî `registrationCreateSchema`, `registrationUpdateSchema`
- `src/middleware/validate.js` ‚Äî –ø–∞—Ä—Å–∏—Ç `req.body` —á–µ—Ä–µ–∑ Zod –∏ –æ—Ç–¥–∞—ë—Ç `422` —Å –¥–µ—Ç–∞–ª—è–º–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ
- `src/middleware/errorHandler.js` ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ (ValidationError -> 422, NotFound -> 404, –¥—Ä.)

–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–ª–∞—Å—Å—ã –æ—à–∏–±–æ–∫ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `src/utils/errors.js` (AppError, NotFoundError, ValidationError, BadRequestError).

---

## üõ† –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
npm install
```

1. –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (nodemon):

```bash
npm run dev
```

1. –û—Ç–∫—Ä–æ–π—Ç–µ:
- API: http://localhost:3000/api/v1
- Swagger UI: http://localhost:3000/docs

(–ø–æ—Ä—Ç –±–µ—Ä—ë—Ç—Å—è –∏–∑ `process.env.PORT` –∏–ª–∏ `3000` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

---

## üß© –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

- –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π:

```bash
curl 'http://localhost:3000/api/v1/events?limit=5&offset=0&q=meetup'
```

- –°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ:

```bash
curl -X POST http://localhost:3000/api/v1/events \
  -H 'Content-Type: application/json' \
  -d '{"title":"Meetup","description":"JS meetup","date":"2025-12-20T19:00:00.000Z","location":"Online"}'
```

## üìå –ò—Ç–æ–≥

API –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è–º–∏ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è–º–∏ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ Swagger.
