# Лабораторная работа №06 — Трекер тренировок

***Вариант №2: Трекер тренировок с личными данными пользователей***

## Цель работы

Реализовать серверное приложение для трекера тренировок с использованием базы данных, JWT-аутентификацией и защитой маршрутов. Обеспечить хранение личных данных пользователей и их тренировок.

## Структура проекта

```bash
task_06/
├── src/                  # исходный код проекта
│   ├── server.js         # основной файл сервера
│   ├── seed.js           # заполнение БД тестовыми данными
│   ├── .env.example       
│   ├── requests.http     # файл для тестирования API
│   └── package.json      # зависимости проекта
└── doc/
    └── README.md         # документация (этот файл)
```

## Реализованные функции

### Основные возможности

- ✅ Регистрация и авторизация пользователей (JWT)
- ✅ Хеширование паролей (bcrypt)
- ✅ CRUD операции для тренировок
- ✅ Защита маршрутов middleware
- ✅ Каждый пользователь видит только свои тренировки
- ✅ Валидация входных данных
- ✅ Статистика тренировок

### Эндпоинты API

**Аутентификация:**

- `POST /api/auth/signup` — регистрация
- `POST /api/auth/login` — вход

**Тренировки (требуют токен):**

- `GET /api/workouts` — все тренировки пользователя
- `GET /api/workouts/:id` — конкретная тренировка
- `POST /api/workouts` — создать тренировку
- `PUT /api/workouts/:id` — обновить тренировку
- `DELETE /api/workouts/:id` — удалить тренировку

**Статистика:**

- `GET /api/workouts/stats/summary` — общая статистика
- `GET /api/workouts/stats/by-type` — статистика по типам

**Системные:**

- `GET /` — информация об API
- `GET /api/health` — проверка работоспособности

## Быстрый старт

1. **Перейдите в папку src:**

```bash
cd src
```

1. **Установка зависимостей:**

```bash
npm install
```

1. **Настройка окружения:**

```bash
cp ../.env.example .env
# отредактируйте .env при необходимости
```

1. **Заполнение БД:**

```bash
node seed.js
```

1. **Запуск сервера:**

```bash
npm start
```

Сервер доступен по адресу: `http://localhost:3000`

## Примеры запросов

**Регистрация:**

```http
POST http://localhost:3000/api/auth/signup
Content-Type: application/json

{
  "username": "Имя",
  "email": "test@mail.com",
  "password": "123456"
}
```

**Создание тренировки:**

```http
POST http://localhost:3000/api/workouts
Authorization: Bearer ваш_токен
Content-Type: application/json

{
  "date": "2024-01-15 08:00:00",
  "exerciseType": "Бег",
  "durationMinutes": 30,
  "caloriesBurned": 300
}
```

## Тестовые пользователи

После запуска `seed.js` создаются:

- Иван Петров: `ivan@example.com` / `user123`
- Мария Сидорова: `maria@example.com` / `test123`

## Технологии

- Node.js + Express
- SQLite (база данных)
- JWT (аутентификация)
- bcrypt (хеширование паролей)
- CORS (безопасность)

## Вывод

Разработан трекер тренировок с полным циклом аутентификации и CRUD операциями. Реализована защита личных данных пользователей, каждый имеет доступ только к своим тренировкам. Приложение соответствует требованиям лабораторной работы и готово к использованию.
