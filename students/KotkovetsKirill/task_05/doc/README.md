# Лабораторная работа №05

<p align="center">Министерство образования Республики Беларусь</p>
<p align="center">Учреждение образования</p>
<p align="center">"Брестский Государственный технический университет"</p>
<p align="center">Кафедра ИИТ</p>
<br><br><br><br><br><br>
<p align="center"><strong>Лабораторная работа №05</strong></p>
<p align="center"><strong>По дисциплине:</strong> "Веб-технологии"</p>
<p align="center"><strong>Тема:</strong> "Серверное REST API на Node.js + Express (валидация, ошибки, Swagger)"</p>
<br><br><br><br><br><br>
<p align="right"><strong>Выполнил:</strong></p>
<p align="right">Студент 4 курса</p>
<p align="right">Группы АС-64</p>
<p align="right">Котковец К. В.</p>
<p align="right"><strong>Проверил:</strong></p>
<p align="right">Несюк А. Н.</p>
<br><br><br><br><br>
<p align="center"><strong>Брест 2025</strong></p>

---

## Цель работы

Реализовать базовую структуру Express‑приложения и CRUD эндпоинты для работы с мероприятиями и билетами. Добавить валидацию (joi), обработчик ошибок и документацию OpenAPI/Swagger UI.

---

### Вариант №35

API мероприятий с билетами и посадочными

## Ход выполнения работы

### 1. Структура проекта

```text
task_05/
├── doc/
│   ├── README.md
│   └── screenshots/
│       └── .gitkeep
└── src/
    ├── index.js
    ├── data.json
    ├── package.json
    ├── package-lock.json
    ├── .env
    └── .gitignore
```

**Описание файлов:**

- `src/index.js` — главный файл приложения с маршрутами API
- `src/data.json` — файл для хранения данных о мероприятиях и билетах
- `src/package.json` — зависимости проекта
- `src/.env` — переменные окружения
- `doc/README.md` — отчет по лабораторной работе

### 2. Реализованные элементы

**API эндпоинты для мероприятий (events):**

- `GET /events` — получение списка мероприятий с параметрами фильтрации (`q`, `limit`, `offset`)
- `GET /events/:id` — получение мероприятия по ID
- `POST /events` — создание нового мероприятия
- `PUT /events/:id` — полное обновление мероприятия
- `DELETE /events/:id` — удаление мероприятия

**API эндпоинты для билетов (tickets):**

- `GET /tickets` — получение списка билетов (с фильтром по eventId)
- `GET /tickets/:id` — получение билета по ID
- `POST /tickets` — создание нового билета
- `PATCH /tickets/:id` — частичное обновление билета
- `DELETE /tickets/:id` — удаление билета

**Технические особенности:**

- Валидация данных с помощью библиотеки Joi
- Middleware: express.json(), cors, morgan
- Документация API через Swagger UI доступна по адресу `/docs`
- Статус-коды: 200, 201, 204, 400, 404, 422, 500
- Хранение данных в JSON файле

### 3. Скриншоты выполненой лабораторной работы

**Swagger документация:**

![Swagger UI](https://picsum.photos/800/400?random=1)

**GET запрос списка мероприятий:**

![GET Events](https://picsum.photos/800/400?random=2)

**POST создание мероприятия:**

![POST Event](https://picsum.photos/800/400?random=3)

**API для работы с билетами:**

![Tickets API](https://picsum.photos/800/400?random=4)

---

## Таблица критериев

| Критерий                                              | Выполнено |
|-------------------------------------------------------|-----------|
| Структура/семантика API                               | ✅        |
| Функциональность CRUD                                 | ✅        |
| Качество интерфейса API (валидация, ошибки, статус‑коды) | ✅    |
| Качество кода/архитектуры                            | ✅        |
| Тесты/проверки (по желанию supertest)                | ❌        |
| Документация/инструкция                              | ✅        |

### Дополнительные бонусы

| Бонус                                                 | Выполнено |
|-------------------------------------------------------|-----------|
| Фильтрация/поиск/сортировка                          | ✅        |
| Пагинация с метаданными (total, limit, offset)       | ❌        |
| Версионирование API (/api/v1)                        | ❌        |

---

## Инструкция по запуску

1. Перейти в папку src:

```bash
cd src
```

1. Установить зависимости:

```bash
npm install
```

1. Запустить сервер в режиме разработки:

```bash
npm run dev
```

1. Или запустить в обычном режиме:

```bash
npm start
```

1. Открыть документацию API:

```
http://localhost:3000/docs
```

1. Примеры запросов:

```bash
# Получить все мероприятия
curl http://localhost:3000/events

# Создать мероприятие
curl -X POST http://localhost:3000/events \
  -H "Content-Type: application/json" \
  -d '{"title":"Концерт","date":"2025-12-30","location":"Зал","totalSeats":200}'

# Получить билеты для мероприятия
curl http://localhost:3000/tickets?eventId=1
```

## Вывод

В ходе выполнения лабораторной работы был разработан REST API для управления мероприятиями и билетами на основе Node.js и Express. Реализованы CRUD операции, валидация входных данных с использованием Joi, централизованная обработка ошибок и документация API с помощью Swagger. Освоены навыки работы с Express middleware, организации структуры API, использования корректных HTTP статус-кодов и создания документации OpenAPI.
