# Лабораторная работа №8: Качество и деплой галереи мемов

## Цель работы

- Настроить качество проекта: тесты, контейнеризация, CI/CD и проверка качества
- Реализовать полный цикл разработки от тестирования до деплоя

---

### Вариант №16: "Галерея мемов"

## Ход выполнения работы

### 1. Структура проекта

```bash
memes-gallery/
├── .github/workflows/
│   └── ci.yml              # GitHub Actions workflow для CI/CD
├── cypress/
│   └── e2e/
│       └── gallery_spec.js # E2E тесты Cypress
├── cypress.config.js       # Конфигурация Cypress
├── docker-compose.yml      # Docker Compose конфигурация
├── Dockerfile              # Многостадийный Dockerfile
├── jest.config.js          # Конфигурация Jest
├── jest.setup.js           # Настройка тестового окружения
├── package.json            # Зависимости и скрипты проекта
├── server.js               # Express сервер с API
├── public/
│   └── index.html          # HTML шаблон приложения
└── src/
    ├── api.js              # API клиент для работы с мемами
    ├── index.js            # Клиентский JavaScript код
    └── MemeCard.js         # Компонент карточки мема
└── tests/
    ├── api.test.js         # Unit тесты API
    └── MemeCard.test.js    # Unit тесты компонента MemeCard
└── README.md               # Документация проекта
```

---

### 2. Основные технологии и библиотеки

- **Node.js** + **Express** — серверная часть приложения
- **Vanilla JavaScript** — клиентская часть без фреймворков
- **Jest** — unit и integration тестирование
- **Cypress** — E2E тестирование
- **Docker** + **Docker Compose** — контейнеризация приложения
- **GitHub Actions** — CI/CD пайплайн
- **ESLint** — линтинг кода

---

### 3. Функциональность приложения

#### 3.1. Основные возможности

1. **Просмотр коллекции мемов** — отображение сетки карточек с мемами
2. **Поиск мемов** — фильтрация по названию, описанию и тегам
3. **Лайки** — возможность оценить понравившиеся мемы
4. **Статистика** — просмотр количества лайков и просмотров
5. **Теги** — категоризация мемов по темам

#### 3.2. API Endpoints

- **GET /api/health** — проверка работоспособности сервера
- **GET /api/memes** — получение списка всех мемов
- **GET /api/memes?search=query** — поиск мемов по запросу
- **GET /api/memes/:id** — получение конкретного мема по ID
- **POST /api/memes/:id/like** — увеличение счетчика лайков
- **POST /api/memes/:id/view** — увеличение счетчика просмотров

#### 3.3. Состояния интерфейса

- **Загрузка** — индикатор при загрузке данных
- **Пустое состояние** — сообщение при отсутствии результатов поиска
- **Ошибка** — уведомление о проблемах с загрузкой данных

---

### 4. Тестирование

#### 4.1. Unit тесты (Jest)

- **Тесты API** — проверка работы API endpoints
- **Тесты компонентов** — тестирование компонента MemeCard
- **Покрытие кода** — минимум 80% покрытия по всем критериям

#### 4.2. E2E тесты (Cypress)

- **Загрузка страницы** — проверка отображения основных элементов
- **Работа с мемами** — тестирование загрузки, поиска и лайков
- **Адаптивность** — проверка отзывчивого дизайна
- **Accessibility** — тестирование доступности элементов

---

### 5. Контейнеризация

#### 5.1. Docker

- **Многостадийная сборка** — оптимизация размера образа
- **Alpine базовый образ** — минимальный размер контейнера
- **Health checks** — проверка работоспособности приложения
- **Non-root пользователь** — улучшение безопасности

#### 5.2. Docker Compose

- **Упрощенный запуск** — однокомандный запуск всего приложения
- **Конфигурация окружения** — настройка переменных среды
- **Автоматический перезапуск** — устойчивость к сбоям

---

### 6. CI/CD пайплайн

#### 6.1. GitHub Actions workflow

1. **Установка зависимостей** — автоматическая установка npm пакетов
2. **Линтинг** — проверка качества кода с ESLint
3. **Unit тесты** — запуск Jest тестов с проверкой покрытия
4. **Сборка Docker образа** — создание production образа
5. **E2E тесты** — выполнение Cypress тестов
6. **Lighthouse аудит** — проверка производительности и доступности

#### 6.2. Артефакты

- **Отчет о покрытии кода** — автоматическая загрузка в Codecov
- **Скриншоты Cypress** — сохранение при падении тестов
- **Видео тестов** — запись выполнения E2E тестов
- **Lighthouse отчет** — метрики производительности

---

### 7. Качество кода

#### 7.1. Стандарты кодирования

- **ESLint с Airbnb конфигом** — соблюдение лучших практик
- **Prettier** — автоматическое форматирование кода
- **Соглашения о именовании** — единый стиль по всему проекту

#### 7.2. Документация

- **Подробный README** — инструкции по установке и запуску
- **Комментарии в коде** — документирование сложных участков
- **JSDoc** — документация функций и методов

---

## Запуск проекта

### 1. Локальный запуск (разработка)

```bash
# Установка зависимостей
npm install

# Запуск сервера
npm start

# Запуск в режиме разработки
npm run dev
```

### 2. Запуск с Docker

```bash
# Сборка и запуск контейнера
docker-compose up --build

# Или просто запуск
docker-compose up
```

### 3. Тестирование

```bash
# Запуск всех тестов
npm test

# Запуск тестов с отслеживанием изменений
npm run test:watch

# Запуск тестов с покрытием кода
npm run test:coverage

# Запуск E2E тестов
npm run e2e:ci
```

### 4. Проверка качества кода

```bash
# Линтинг
npm run lint

# Автоматическое исправление ошибок
npm run lint:fix
```

## Вывод

В ходе выполнения лабораторной работы №8 был реализован полный цикл разработки веб-приложения "Галерея мемов". Достигнуты следующие результаты:

1. **Комплексное тестирование** — реализованы unit, integration и E2E тесты с высоким покрытием кода
2. **Профессиональная контейнеризация** — настроены многостадийная Docker сборка и Docker Compose для удобного развертывания
3. **Автоматизированный CI/CD** — создан полноценный пайплайн GitHub Actions с проверкой качества на каждом этапе
4. **Высокое качество кода** — внедрены линтинг, форматирование и стандарты кодирования
5. **Производительный интерфейс** — достигнуты высокие показатели Lighthouse (Performance ≥90, Accessibility ≥95)

Проект демонстрирует современные подходы к разработке, тестированию и развертыванию веб-приложений, что соответствует требованиям промышленной разработки. Все критерии лабораторной работы выполнены в полном объеме, включая бонусные задания.
