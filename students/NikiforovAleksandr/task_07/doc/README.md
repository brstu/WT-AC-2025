# Отчёт по лабораторной работе №7

## React‑приложение: маршрутизация, состояние, формы, работа с API

***Вариант №16: "Галерея мемов с лайками"***

### Цель работы

Создать полноценное SPA на React с маршрутизацией, управлением состоянием, формами и взаимодействием с API. Реализовать галерею мемов с функционалом лайков, созданием, редактированием и удалением мемов.

### Ход выполнения работы

#### 1. Структура проекта

```bash
task_07/
├── doc/
│   └── README.md          # Документация и описание проекта
├── .env                   # Переменные окружения (API URL)
├── index.html             # HTML шаблон приложения
├── package.json           # Конфигурация проекта и зависимости
├── vite.config.js         # Конфигурация Vite
└── src/
    ├── components/
    │   ├── Layout.jsx     # Основной лейаут с навигацией
    │   ├── MemeCard.jsx   # Карточка мема для списка
    │   └── MemeForm.jsx   # Форма создания/редактирования мема
    ├── pages/
    │   ├── MemeList.jsx   # Главная страница со списком мемов
    │   ├── MemeDetail.jsx # Страница детальной информации о меме
    │   ├── CreateMeme.jsx # Страница добавления нового мема
    │   ├── EditMeme.jsx   # Страница редактирования мема
    │   └── NotFound.jsx   # Страница 404 ошибки
    ├── services/
    │   └── memeApi.js     # API для работы с мемами
    ├── App.jsx            # Корневой компонент с маршрутизацией
    ├── main.jsx           # Точка входа React приложения
    └── index.css          # Глобальные стили приложения
```

#### 2. Основные технологии и библиотеки

- **React 18 + Vite** — сборка и рендеринг приложения
- **React Router v6** — маршрутизация между страницами
- **React Hooks** — управление состоянием компонентов
- **React Hook Form** — управление формами
- **Zod** — схема валидации для форм
- **CSS3** — современная стилизация с использованием CSS переменных
- **LocalStorage** — хранение состояния авторизации

#### 3. Функциональность приложения

##### 3.1. Страницы

- **Главная страница (/)** — отображение списка всех мемов с поиском и описанием возможностей
- **Список мемов (/memes)** — отображение каталога мемов с поиском и фильтрацией
- **Детальная страница мема (/memes/:id)** — полная информация о конкретном меме
- **Создание мема (/memes/new)** — форма добавления нового мема в коллекцию
- **Редактирование мема (/memes/:id/edit)** — форма изменения данных мема
- **Страница 404 (/*)** — обработка несуществующих маршрутов

##### 3.2. Маршрутизация

- Вложенные маршруты с общим Layout
- Динамические параметры (:id) для детальных страниц
- Навигация через `<Link>` и программная навигация через `useNavigate()`
- Защищённые маршруты для авторизованных пользователей
- Обработка несуществующих маршрутов

##### 3.3. Работа с данными (CRUD)

- **GET /memes** — получение списка всех мемов
- **GET /memes/:id** — получение детальной информации о меме
- **POST /memes** — создание нового мема
- **PUT /memes/:id** — обновление существующего мема
- **DELETE /memes/:id** — удаление мема из коллекции
- **POST /memes/:id/like** — добавление лайка к мему

##### 3.4. Авторизация пользователей

- Два состояния пользователя: **гость** и **авторизованный**
- Гости могут только просматривать мемы
- Авторизованные пользователи могут:
  - Создавать новые мемы
  - Редактировать свои мемы
  - Удалять свои мемы
  - Ставить лайки
  - Оставлять комментарии
- Состояние авторизации сохраняется в LocalStorage

##### 3.5. Состояния интерфейса

- **Загрузка (loading)** — индикатор при выполнении запросов
- **Ошибка (error)** — отображение ошибок при неудачных запросах
- **Пустое состояние (empty)** — сообщение при отсутствии мемов
- **Уведомления** — всплывающие сообщения об успешных операциях
- **Информационные сообщения** — подсказки для неавторизованных пользователей

##### 3.6. Формы и валидация

- Валидация всех обязательных полей
- Проверка URL изображения
- Минимальная длина заголовка и описания
- Информативные сообщения об ошибках
- Форматирование тегов (разделение запятыми)

#### 4. Запуск проекта

##### 4.1. Установка зависимостей

Откройте проект в терминале и выполните:

```bash
npm install
```

##### 4.2. Настройка окружения

Создайте файл `.env` в корне проекта со следующим содержимым:

```env
VITE_API_URL=http://localhost:3000/api
```

##### 4.3. Запуск в режиме разработки

Выполните команду для запуска сервера разработки:

```bash
npm run dev
```

##### 4.4. Доступ к приложению

После успешного запуска откройте браузер и перейдите по адресу:

```http
http://localhost:3000
```

##### 4.5. Использование мокового API

Приложение использует встроенный моковый API, который не требует дополнительной настройки. Все данные хранятся в памяти браузера. Используются реальные изображения мемов с Imgflip.

#### Ключевые особенности реализации

##### 1. Архитектура и структура кода

- Чёткое разделение на компоненты, страницы и сервисы
- Переиспользуемые компоненты (MemeCard, MemeForm)
- Единый источник данных для всех компонентов
- Модульная структура с разделением ответственности

##### 2. Управление состоянием

- React Hooks для локального состояния компонентов
- Контекст для глобального состояния (авторизация)
- Синхронизация состояния между компонентами
- Оптимистичные обновления для лайков

##### 3. Формы и валидация

- React Hook Form для управления состоянием форм
- Zod для схем валидации с информативными сообщениями об ошибках
- Валидация на клиенте перед отправкой на сервер
- Динамическая очистка ошибок при изменении полей

##### 4. Пользовательский опыт

- Современный адаптивный дизайн с градиентами и тенями
- Плавные анимации и переходы
- Уведомления о выполненных операциях
- Подтверждение удаления мемов
- Информативные сообщения для неавторизованных пользователей
- Поиск и фильтрация мемов

##### 5. Производительность

- Ленивая загрузка изображений
- Оптимизированные перерисовки компонентов
- Эффективное управление состоянием форм
- Кэширование данных в компонентах

#### 6. Особенности реализации галереи мемов

##### 6.1. Система лайков

- Только для авторизованных пользователей
- Оптимистичные обновления (лайк сразу отображается)
- Защита от повторного лайка
- Анимация изменения состояния

##### 6.2. Тегирование мемов

- Гибкая система тегов
- Автоматическое преобразование строки в массив тегов
- Фильтрация по тегам
- Визуальное выделение тегов

##### 6.3. Детальная информация

- Полное описание мема
- Статистика (просмотры, комментарии, лайки)
- Информация об авторе
- Дата создания
- Возможности редактирования для авторизованных пользователей

##### 6.4. Поиск и фильтрация

- Поиск по названию, описанию и тегам
- Интерактивный поиск с автодополнением
- Статистика найденных результатов
- Сообщения о пустых результатах поиска

### Вывод

В ходе выполнения лабораторной работы было создано полноценное одностраничное приложение (SPA) на React для управления галереей мемов с функционалом лайков. Реализованы все основные требования задания:

1. **Маршрутизация** — навигация между 5 страницами с помощью React Router v6, включая динамические маршруты для детальных страниц и обработку 404 ошибок.

2. **Работа с данными** — полный CRUD функционал с поддержкой состояний загрузки, ошибок и пустых состояний.

3. **Формы с валидацией** — интуитивные формы создания и редактирования мемов с комплексной валидацией через React Hook Form и Zod.

4. **Управление состоянием** — централизованное состояние через React Hooks с поддержкой авторизации пользователей.

5. **Пользовательский интерфейс** — современный адаптивный дизайн с градиентами, анимациями и уведомлениями.

6. **Система авторизации** — реализовано два состояния пользователя с различными правами доступа.

Особое внимание было уделено пользовательскому опыту:

- Для неавторизованных пользователей доступен полный просмотр мемов
- После авторизации открываются дополнительные возможности
- Информативные сообщения направляют пользователя
- Удобный поиск и фильтрация контента
- Быстрые и отзывчивые интерфейсы

Приложение демонстрирует современные подходы к разработке React-приложений и может служить основой для более сложных проектов с полноценной системой авторизации и взаимодействием с бэкенд-API.
