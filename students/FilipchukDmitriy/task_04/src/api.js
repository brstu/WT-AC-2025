// API module
var mockData = [
    { id: 1, userId: 1, title: 'Помощь детскому дому "Солнышко"', body: 'Сбор средств на ремонт детского дома и покупку новой мебели для комнат. Требуется 500000 рублей на полное обновление спальных комнат для 30 детей.' },
    { id: 2, userId: 1, title: 'Лечение Маши Ивановой', body: 'Маше 7 лет, требуется дорогостоящая операция. Нужна ваша помощь для сбора средств на лечение в специализированной клинике за рубежом.' },
    { id: 3, userId: 2, title: 'Приют для бездомных животных', body: 'Открытие нового приюта для бездомных кошек и собак. Собираем деньги на строительство вольеров, покупку корма и медикаментов.' },
    { id: 4, userId: 2, title: 'Библиотека для сельской школы', body: 'Сбор книг и учебных материалов для небольшой сельской школы. Детям нужны современные учебники и художественная литература.' },
    { id: 5, userId: 3, title: 'Поддержка ветеранов войны', body: 'Программа помощи пожилым ветеранам: доставка продуктов, медицинская помощь, социальная поддержка и общение.' },
    { id: 6, userId: 3, title: 'Бесплатные обеды для нуждающихся', body: 'Организация бесплатной столовой для малоимущих семей и бездомных людей. Требуются волонтеры и финансовая помощь.' },
    { id: 7, userId: 4, title: 'Спортивная площадка во дворе', body: 'Строительство современной спортивной площадки для детей и подростков. Планируется установка турников, брусьев и беговых дорожек.' },
    { id: 8, userId: 4, title: 'Реабилитация после инсульта', body: 'Сбор средств на реабилитационный центр для людей, перенесших инсульт. Необходимо современное оборудование и квалифицированные специалисты.' },
    { id: 9, userId: 5, title: 'Помощь многодетным семьям', body: 'Программа поддержки многодетных семей: покупка одежды, школьных принадлежностей, продуктов питания и игрушек для детей.' },
    { id: 10, userId: 5, title: 'Озеленение городских парков', body: 'Экологический проект по высадке деревьев и кустарников в городских парках. Присоединяйтесь к нашей команде волонтеров!' },
    { id: 11, userId: 6, title: 'Центр для детей с аутизмом', body: 'Открытие специализированного центра для работы с детьми с расстройствами аутистического спектра. Нужны специалисты и оборудование.' },
    { id: 12, userId: 6, title: 'Помощь пострадавшим от пожара', body: 'Срочный сбор одежды, мебели и денежных средств для семей, потерявших дома в результате пожара. Помогите людям вернуться к нормальной жизни!' },
    { id: 13, userId: 7, title: 'Театральная студия для детей', body: 'Создание бесплатной театральной студии для детей из малообеспеченных семей. Искусство должно быть доступно каждому ребенку!' },
    { id: 14, userId: 7, title: 'Кислородные концентраторы для больницы', body: 'Сбор средств на закупку современных кислородных концентраторов для городской больницы. Это спасет множество жизней!' },
    { id: 15, userId: 8, title: 'Компьютеры для сельской школы', body: 'Оснащение компьютерного класса в сельской школе. Дети должны иметь доступ к современным технологиям и интернету.' }
];

var data = mockData.slice();
var nextId = 16;

function getItems() {
    return new Promise(function(resolve) {
        setTimeout(function() {
            resolve(data.slice());
        }, 300);
    });
}

function getItem(id) {
    return new Promise(function(resolve, reject) {
        setTimeout(function() {
            var item = data.find(function(i) { return i.id == id; });
            if (item) {
                resolve(item);
            } else {
                reject(new Error('Проект не найден'));
            }
        }, 200);
    });
}

function createItem(itemData) {
    return new Promise(function(resolve) {
        setTimeout(function() {
            var newItem = {
                id: nextId++,
                userId: itemData.userId || 1,
                title: itemData.title,
                body: itemData.body
            };
            data.push(newItem);
            resolve(newItem);
        }, 400);
    });
}

function updateItem(id, itemData) {
    return new Promise(function(resolve, reject) {
        setTimeout(function() {
            var index = data.findIndex(function(i) { return i.id == id; });
            if (index !== -1) {
                data[index] = {
                    id: id,
                    userId: itemData.userId,
                    title: itemData.title,
                    body: itemData.body
                };
                resolve(data[index]);
            } else {
                reject(new Error('Проект не найден'));
            }
        }, 400);
    });
}

function deleteItem(id) {
    return new Promise(function(resolve, reject) {
        setTimeout(function() {
            var index = data.findIndex(function(i) { return i.id == id; });
            if (index !== -1) {
                data.splice(index, 1);
                resolve({ success: true });
            } else {
                reject(new Error('Проект не найден'));
            }
        }, 300);
    });
}
