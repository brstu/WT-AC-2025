# Лабораторная работа №05

<p align="center">Министерство образования Республики Беларусь</p>
<p align="center">Учреждение образования</p>
<p align="center">"Брестский Государственный технический университет"</p>
<p align="center">Кафедра ИИТ</p>
<br><br><br><br><br><br>
<p align="center"><strong>Лабораторная работа №05</strong></p>
<p align="center"><strong>По дисциплине:</strong> "Веб-технологии"</p>
<p align="center"><strong>Тема:</strong> Серверное REST API на Node.js + Express</p>
<br><br><br><br><br><br>
<p align="right"><strong>Выполнил:</strong></p>
<p align="right">Студент 4 курса</p>
<p align="right">Группы АС-64</p>
<p align="right">Белаш А. О.</p>
<p align="right"><strong>Проверил:</strong></p>
<p align="right">Несюк А. Н.</p>
<br><br><br><br><br>
<p align="center"><strong>Брест 2025</strong></p>

---

## Цель работы

Создание REST API для ресурса опросов/голосований на Express с валидацией входных данных, централизованной обработкой ошибок и документацией Swagger.

---

### Вариант №25

**Тема:** API опросов/голосований

## Ход выполнения работы

### 1. Структура проекта

Проект организован следующим образом:

- `index.js` — основной файл сервера с маршрутами API
- `package.json` — конфигурация npm проекта и зависимости
- `.env` — переменные окружения
- `.gitignore` — исключаемые файлы

### 2. Реализованные элементы

В данной работе реализованы следующие компоненты:

- **Express сервер** с базовой структурой приложения
- **Middleware**: `express.json()`, `cors`, `morgan` для логирования запросов
- **CRUD операции для опросов**:
  - GET `/polls` — получение списка опросов с поддержкой параметров `q`, `limit`, `offset`
  - GET `/polls/:id` — получение опроса по идентификатору
  - POST `/polls` — создание нового опроса
  - DELETE `/polls/:id` — удаление опроса
  - POST `/polls/:id/vote` — голосование в опросе
- **Валидация данных** с использованием библиотеки Joi для проверки входных данных при создании опроса
- **Хранение данных** в памяти приложения (массив объектов)
- **Обработка ошибок** с централизованным error handler
- **Swagger UI документация** доступна по адресу `/docs`
- **Переменные окружения** в файле `.env`

### 3. Скриншоты выполненной лабораторной работы

#### Получение списка опросов (GET /polls)

![Список опросов](https://via.placeholder.com/800x400/4A90E2/FFFFFF?text=GET+/polls+-+Список+опросов)

#### Получение опроса по ID (GET /polls/:id)

![Опрос по ID](https://via.placeholder.com/800x400/7B68EE/FFFFFF?text=GET+/polls/1+-+Опрос+по+ID)

#### Создание нового опроса (POST /polls)

![Создание опроса](https://via.placeholder.com/800x400/50C878/FFFFFF?text=POST+/polls+-+Создание+опроса)

#### Swagger документация

![Swagger UI](https://via.placeholder.com/800x400/FF6347/FFFFFF?text=Swagger+UI+документация)

#### Голосование в опросе (POST /polls/:id/vote)

![Голосование](https://via.placeholder.com/800x400/FFD700/000000?text=POST+/polls/1/vote+-+Голосование)

---

## Таблица критериев

| Критерий                                                      | Выполнено |
|---------------------------------------------------------------|-----------|
| Структура/семантика API                                       | ✅        |
| Функциональность CRUD                                         | ✅        |
| Качество интерфейса API (валидация, ошибки, статус-коды)     | ✅        |
| Качество кода/архитектуры                                     | ✅        |
| Тесты/проверки (supertest)                                    | ❌        |
| Документация/инструкция                                       | ✅        |

### Дополнительные бонусы

| Бонус                                        | Выполнено |
|----------------------------------------------|-----------|
| Фильтрация/поиск/сортировка                  | ✅        |
| Пагинация с метаданными                      | ✅        |
| Версионирование API (/api/v1)               | ❌        |

---

## Инструкция по запуску

### Установка зависимостей

```bash
cd src
npm install
```

### Запуск сервера

**Режим разработки:**

```bash
npm run dev
```

**Обычный запуск:**

```bash
npm start
```

Сервер запустится на порту 3000 (или указанном в `.env`).

### Доступ к документации

После запуска сервера документация Swagger доступна по адресу:

```text
http://localhost:3000/docs
```

### Примеры запросов

**Получить все опросы:**

```bash
GET http://localhost:3000/polls
```

**Получить опрос по ID:**

```bash
GET http://localhost:3000/polls/1
```

**Создать новый опрос:**

```bash
POST http://localhost:3000/polls
Content-Type: application/json

{
  "title": "Любимое время года?",
  "description": "Выберите ваше любимое время года",
  "options": ["Зима", "Весна", "Лето", "Осень"]
}
```

**Проголосовать:**

```bash
POST http://localhost:3000/polls/1/vote
Content-Type: application/json

{
  "optionIndex": 0
}
```

**Удалить опрос:**

```bash
DELETE http://localhost:3000/polls/1
```

---

## Вывод

В ходе выполнения лабораторной работы был разработан REST API для управления опросами и голосованиями. Реализованы основные CRUD операции, валидация входных данных с использованием библиотеки Joi, обработка ошибок и документация API через Swagger UI. Использовано временное хранение данных в памяти приложения. Освоены навыки работы с Express.js, middleware, HTTP статус-кодами и документированием API.
